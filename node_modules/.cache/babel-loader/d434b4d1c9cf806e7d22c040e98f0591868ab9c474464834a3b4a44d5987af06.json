{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\fullStack-vinci\\\\gestion-bebidas\\\\src\\\\pages\\\\VinosPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { obtenerTodosLosVinos, eliminarVino } from \"../services/vinoService\";\nimport { VinoList } from \"../components/VinoList\";\nimport { VinoDetail } from \"../components/VinoDetail\";\nimport { Toast } from \"primereact/toast\";\nimport { Dialog } from \"primereact/dialog\";\nimport { confirmDialog } from \"primereact/confirmdialog\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst VinosPage = () => {\n  _s();\n  const [vinos, setVinos] = useState([]);\n  const [selectedVino, setSelectedVino] = useState(null);\n  const [dialogVisible, setDialogVisible] = useState(false);\n  const [reload, setReload] = useState(false); // Estado para refrescar la lista de vinos tras eliminación\n  const toast = useRef(null);\n\n  // Función para cargar todos los vinos\n  const cargarVinos = async () => {\n    try {\n      const data = await obtenerTodosLosVinos();\n      setVinos(data); // Guardar todos los vinos en el estado\n    } catch (error) {\n      console.error(\"Error al obtener los vinos\", error);\n    }\n  };\n\n  // useEffect para cargar los vinos al montar el componente\n  useEffect(() => {\n    cargarVinos(); // Llamada a la API para cargar los vinos\n  }, [reload]); // Cada vez que cambie 'reload', volverá a cargar los vinos\n\n  // Función para confirmar la eliminación de un vino\n  const confirmarEliminarVino = id => {\n    confirmDialog({\n      message: \"¿Está seguro de que desea eliminar este vino?\",\n      header: \"Confirmación\",\n      icon: \"pi pi-exclamation-triangle\",\n      accept: () => handleEliminarVino(id)\n    });\n  };\n\n  // Función para eliminar un vino\n  const handleEliminarVino = async id => {\n    try {\n      await eliminarVino(id); // Llama al servicio para eliminar el vino\n      toast.current.show({\n        severity: \"success\",\n        summary: \"Éxito\",\n        detail: \"Vino eliminado\",\n        life: 3000\n      });\n      setReload(!reload); // Actualiza el estado para recargar la lista de vinos\n    } catch (error) {\n      toast.current.show({\n        severity: \"error\",\n        summary: \"Error\",\n        detail: \"Error al eliminar el vino\",\n        life: 3000\n      });\n    }\n  };\n\n  // Función para seleccionar un vino y mostrar el diálogo de detalle\n  const handleSelectVino = vino => {\n    setSelectedVino(vino);\n    setDialogVisible(true);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Toast, {\n      ref: toast\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Lista de Vinos\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(VinoList, {\n      vinos: vinos,\n      onSelectVino: handleSelectVino,\n      onDeleteVino: confirmarEliminarVino\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      header: \"Detalle del Vino\",\n      visible: dialogVisible,\n      onHide: () => setDialogVisible(false),\n      style: {\n        width: \"50vw\"\n      },\n      children: selectedVino && /*#__PURE__*/_jsxDEV(VinoDetail, {\n        vino: selectedVino\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 26\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n};\n_s(VinosPage, \"2A3fE0LrcZgSpYL6B4Uf3yam7vk=\");\n_c = VinosPage;\nexport default VinosPage;\nvar _c;\n$RefreshReg$(_c, \"VinosPage\");","map":{"version":3,"names":["React","useState","useEffect","useRef","obtenerTodosLosVinos","eliminarVino","VinoList","VinoDetail","Toast","Dialog","confirmDialog","jsxDEV","_jsxDEV","VinosPage","_s","vinos","setVinos","selectedVino","setSelectedVino","dialogVisible","setDialogVisible","reload","setReload","toast","cargarVinos","data","error","console","confirmarEliminarVino","id","message","header","icon","accept","handleEliminarVino","current","show","severity","summary","detail","life","handleSelectVino","vino","children","ref","fileName","_jsxFileName","lineNumber","columnNumber","onSelectVino","onDeleteVino","visible","onHide","style","width","_c","$RefreshReg$"],"sources":["C:/Users/LENOVO/Desktop/fullStack-vinci/gestion-bebidas/src/pages/VinosPage.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport { obtenerTodosLosVinos, eliminarVino } from \"../services/vinoService\";\r\nimport { VinoList } from \"../components/VinoList\";\r\nimport { VinoDetail } from \"../components/VinoDetail\";\r\nimport { Toast } from \"primereact/toast\";\r\nimport { Dialog } from \"primereact/dialog\";\r\nimport { confirmDialog } from \"primereact/confirmdialog\";\r\n\r\nconst VinosPage = () => {\r\n  const [vinos, setVinos] = useState([]);\r\n  const [selectedVino, setSelectedVino] = useState(null);\r\n  const [dialogVisible, setDialogVisible] = useState(false);\r\n  const [reload, setReload] = useState(false); // Estado para refrescar la lista de vinos tras eliminación\r\n  const toast = useRef(null);\r\n\r\n  // Función para cargar todos los vinos\r\n  const cargarVinos = async () => {\r\n    try {\r\n      const data = await obtenerTodosLosVinos();\r\n      setVinos(data); // Guardar todos los vinos en el estado\r\n    } catch (error) {\r\n      console.error(\"Error al obtener los vinos\", error);\r\n    }\r\n  };\r\n\r\n  // useEffect para cargar los vinos al montar el componente\r\n  useEffect(() => {\r\n    cargarVinos(); // Llamada a la API para cargar los vinos\r\n  }, [reload]); // Cada vez que cambie 'reload', volverá a cargar los vinos\r\n\r\n  // Función para confirmar la eliminación de un vino\r\n  const confirmarEliminarVino = (id) => {\r\n    confirmDialog({\r\n      message: \"¿Está seguro de que desea eliminar este vino?\",\r\n      header: \"Confirmación\",\r\n      icon: \"pi pi-exclamation-triangle\",\r\n      accept: () => handleEliminarVino(id),\r\n    });\r\n  };\r\n\r\n  // Función para eliminar un vino\r\n  const handleEliminarVino = async (id) => {\r\n    try {\r\n      await eliminarVino(id); // Llama al servicio para eliminar el vino\r\n      toast.current.show({\r\n        severity: \"success\",\r\n        summary: \"Éxito\",\r\n        detail: \"Vino eliminado\",\r\n        life: 3000,\r\n      });\r\n      setReload(!reload); // Actualiza el estado para recargar la lista de vinos\r\n    } catch (error) {\r\n      toast.current.show({\r\n        severity: \"error\",\r\n        summary: \"Error\",\r\n        detail: \"Error al eliminar el vino\",\r\n        life: 3000,\r\n      });\r\n    }\r\n  };\r\n  \r\n\r\n  // Función para seleccionar un vino y mostrar el diálogo de detalle\r\n  const handleSelectVino = (vino) => {\r\n    setSelectedVino(vino);\r\n    setDialogVisible(true);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Toast ref={toast} />\r\n      <h1>Lista de Vinos</h1>\r\n      <VinoList vinos={vinos} onSelectVino={handleSelectVino} onDeleteVino={confirmarEliminarVino} />\r\n      <Dialog header=\"Detalle del Vino\" visible={dialogVisible} onHide={() => setDialogVisible(false)} style={{ width: \"50vw\" }}>\r\n        {selectedVino && <VinoDetail vino={selectedVino} />}\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VinosPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}