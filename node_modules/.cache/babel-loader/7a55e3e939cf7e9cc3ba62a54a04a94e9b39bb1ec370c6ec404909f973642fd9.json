{"ast":null,"code":"import axios from 'axios';\nconst API_URL = 'http://localhost:3000/vinos'; // La URL de tu API para vinos\nconst BODEGA_API_URL = 'http://localhost:3000/bodegas'; // La URL de tu API para bodegas\n\n// Obtener todos los vinos\nexport const getAllVinos = async () => {\n  try {\n    const response = await axios.get(API_URL);\n    return response.data;\n  } catch (error) {\n    console.error(\"Error al obtener vinos:\", error);\n    throw error;\n  }\n};\n\n// Crear un nuevo vino y asociarlo a una bodega\nexport const createVino = async (vino, bodegaId) => {\n  try {\n    // Crear el vino\n    const response = await axios.post(API_URL, {\n      ...vino,\n      bodega: bodegaId // Asociar el ID de la bodega\n    });\n\n    // Agregar el ID del vino creado al arreglo de vinos de la bodega\n    await axios.put(`${BODEGA_API_URL}/${bodegaId}/agregar-vino`, {\n      vinoId: response.data._id\n    });\n    return response.data;\n  } catch (error) {\n    console.error(\"Error al crear vino y asociarlo a la bodega:\", error);\n    throw error;\n  }\n};\n\n// Eliminar un vino y quitar su referencia de la bodega\nexport const deleteVino = async (vinoId, bodegaId) => {\n  try {\n    // Eliminar el vino de la colecci칩n de vinos\n    const response = await axios.delete(`${API_URL}/id/${vinoId}`);\n\n    // Actualizar la bodega quitando la referencia al vino eliminado\n    await axios.put(`${BODEGA_API_URL}/${bodegaId}/eliminar-vino`, {\n      vinoId: vinoId\n    });\n    return response.data;\n  } catch (error) {\n    console.error(\"Error al eliminar vino y actualizar la bodega:\", error);\n    throw error;\n  }\n};\n\n// Actualizar un vino por ID\nexport const updateVino = async (vinoId, updatedVino) => {\n  try {\n    const response = await axios.put(`${API_URL}/id/${vinoId}`, updatedVino);\n    return response.data;\n  } catch (error) {\n    console.error(\"Error al actualizar vino:\", error);\n    throw error;\n  }\n};\n\n// Obtener un vino por ID con detalles de la bodega\nexport const getVinoById = async vinoId => {\n  try {\n    const response = await axios.get(`${API_URL}/id/${vinoId}`);\n    return response.data; // Esto incluir치 la bodega si en el backend usas populate\n  } catch (error) {\n    console.error(\"Error al obtener vino por ID:\", error);\n    throw error;\n  }\n};\n\n// Obtener un vino por nombre\nexport const getVinoByNombre = async nombre => {\n  try {\n    const response = await axios.get(`${API_URL}/nombre/${nombre}`);\n    return response.data;\n  } catch (error) {\n    console.error(\"Error al obtener vino por nombre:\", error);\n    throw error;\n  }\n};","map":{"version":3,"names":["axios","API_URL","BODEGA_API_URL","getAllVinos","response","get","data","error","console","createVino","vino","bodegaId","post","bodega","put","vinoId","_id","deleteVino","delete","updateVino","updatedVino","getVinoById","getVinoByNombre","nombre"],"sources":["C:/Users/LENOVO/Desktop/fullStack-vinci/gestion-bebidas/src/services/vinoServices.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_URL = 'http://localhost:3000/vinos'; // La URL de tu API para vinos\r\nconst BODEGA_API_URL = 'http://localhost:3000/bodegas'; // La URL de tu API para bodegas\r\n\r\n// Obtener todos los vinos\r\nexport const getAllVinos = async () => {\r\n  try {\r\n    const response = await axios.get(API_URL);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(\"Error al obtener vinos:\", error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Crear un nuevo vino y asociarlo a una bodega\r\nexport const createVino = async (vino, bodegaId) => {\r\n  try {\r\n    // Crear el vino\r\n    const response = await axios.post(API_URL, {\r\n      ...vino,\r\n      bodega: bodegaId,  // Asociar el ID de la bodega\r\n    });\r\n    \r\n    // Agregar el ID del vino creado al arreglo de vinos de la bodega\r\n    await axios.put(`${BODEGA_API_URL}/${bodegaId}/agregar-vino`, {\r\n      vinoId: response.data._id,\r\n    });\r\n\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(\"Error al crear vino y asociarlo a la bodega:\", error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Eliminar un vino y quitar su referencia de la bodega\r\nexport const deleteVino = async (vinoId, bodegaId) => {\r\n  try {\r\n    // Eliminar el vino de la colecci칩n de vinos\r\n    const response = await axios.delete(`${API_URL}/id/${vinoId}`);\r\n\r\n    // Actualizar la bodega quitando la referencia al vino eliminado\r\n    await axios.put(`${BODEGA_API_URL}/${bodegaId}/eliminar-vino`, {\r\n      vinoId: vinoId,\r\n    });\r\n\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(\"Error al eliminar vino y actualizar la bodega:\", error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Actualizar un vino por ID\r\nexport const updateVino = async (vinoId, updatedVino) => {\r\n  try {\r\n    const response = await axios.put(`${API_URL}/id/${vinoId}`, updatedVino);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(\"Error al actualizar vino:\", error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Obtener un vino por ID con detalles de la bodega\r\nexport const getVinoById = async (vinoId) => {\r\n  try {\r\n    const response = await axios.get(`${API_URL}/id/${vinoId}`);\r\n    return response.data; // Esto incluir치 la bodega si en el backend usas populate\r\n  } catch (error) {\r\n    console.error(\"Error al obtener vino por ID:\", error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Obtener un vino por nombre\r\nexport const getVinoByNombre = async (nombre) => {\r\n  try {\r\n    const response = await axios.get(`${API_URL}/nombre/${nombre}`);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(\"Error al obtener vino por nombre:\", error);\r\n    throw error;\r\n  }\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}